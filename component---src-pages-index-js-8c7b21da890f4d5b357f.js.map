{"version":3,"sources":["webpack:///./src/lib/util.js","webpack:///./src/lib/unfold.js","webpack:///./src/lib/kirinuki.js","webpack:///./src/lib/env/node.js","webpack:///./src/components/html-editor.js","webpack:///./src/components/json-editor.js","webpack:///./src/components/previewer.js","webpack:///./src/examples/mock-html.js","webpack:///./src/examples/mock-schema.js","webpack:///./src/pages/index.js","webpack:///./src/lib/env/browser.js","webpack:///./src/lib/traversal.js"],"names":["Object","defineProperty","exports","value","isString","str","String","isPlural","_pluralize","default","obj","require","__esModule","unfold","keys","len","Math","max","apply","map","key","val","Array","isArray","length","from","i","reduce","memo","browser","node","_node","_browser","_traversal","traversal","context","getNodeValue","_cheerio","_util","createDom","root","cheerioNode","load","html","getScrapper","rootElement","scrap","selector","attr","get","undefined","attribs","scrapElements","toArray","tag","type","name","src","href","text","trim","HtmlEditor","props","react_default","a","createElement","className","react_codemirror2","options","lineNumbers","lineWrapping","mode","height","width","onBeforeChange","editor","data","dispatch","JSONEditor","json","Previewer","ReactJSONViewer_default","heroNews","attributeRuleSchema","hero","heroes","defaultSchema","topic","content","nameRuleSchema","contents","unfoldRuleSchema","unfoldTopics","_unfold","image","topics","images","rootRuleSchema","mainTopic","_root","subTopic","navigator","Index","_this","_classCallCheck","this","_possibleConstructorReturn","_getPrototypeOf","call","state","JSON","stringify","result","loading","MicroContainer","subscribe","updateJson","updateHtml","setState","parse","e","console","error","updateSchema","schma","kirinuki","querySchema","table","Helmet","rel","Container","Header","as","onClick","updateNameRuleSchema","bind","updateAttributeRuleSchema","updateUnfoldRuleSchema","updateRootRuleSchema","Grid","celled","Row","Column","previewer_Previewer","textAlign","Button","fluid","primary","arguments","document","target","DOMParser","parseFromString","querySelector","rootNode","querySelectorAll","getAttribute","list","HTMLImageElement","HTMLAnchorElement","HTMLLinkElement","textContent","bindConvert","baseSchema","schema","assign","isUnfoldMode","scrapper","convertedObject","converted","_typeof","Symbol","_typeof2","iterator","constructor","prototype"],"mappings":"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","file":"component---src-pages-index-js-8c7b21da890f4d5b357f.js","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isString = isString;\nexports.isPlural = isPlural;\n\nvar _pluralize = _interopRequireDefault(require(\"pluralize\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction isString(str) {\n  return typeof str === \"string\" || str instanceof String;\n}\n\nfunction isPlural(str) {\n  return (0, _pluralize.default)(str) == str;\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.unfold = unfold;\n\nfunction unfold(obj) {\n  var keys = Object.keys(obj);\n  var len = Math.max.apply(null, keys.map(function (key) {\n    var val = obj[key];\n\n    if (Array.isArray(val)) {\n      return val.length;\n    }\n\n    return 1;\n  }));\n  return Array.from(Array(len).keys()).map(function (i) {\n    return keys.reduce(function (memo, key) {\n      var value = obj[key];\n      memo[key] = Array.isArray(value) ? value[i] : value;\n      return memo;\n    }, {});\n  });\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.browser = exports.node = void 0;\n\nvar _node = require(\"./env/node\");\n\nvar _browser = require(\"./env/browser\");\n\nvar _unfold = require(\"./unfold\");\n\nvar _util = require(\"./util\");\n\nvar _traversal = require(\"./traversal\");\n\nvar node = (0, _traversal.traversal)(_node.context);\nexports.node = node;\nvar browser = (0, _traversal.traversal)(_browser.context);\nexports.browser = browser;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getNodeValue = getNodeValue;\nexports.context = void 0;\n\nvar _cheerio = _interopRequireDefault(require(\"cheerio\"));\n\nvar _util = require(\"../util\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction createDom(node, root) {\n  var cheerioNode = (0, _util.isString)(node) ? _cheerio.default.load(node) : node;\n\n  if (root) {\n    return _cheerio.default.load(cheerioNode(root).html());\n  }\n\n  return cheerioNode;\n}\n\nfunction getScrapper(rootElement) {\n  var scrap = function scrap(selector, attr) {\n    var node = rootElement(selector).get(0);\n\n    if (node == null) {\n      return void 0;\n    }\n\n    if (attr == undefined) {\n      return getNodeValue(node);\n    } else {\n      return node.attribs[attr];\n    }\n  };\n\n  var scrapElements = function scrapElements(selector, attr) {\n    if (attr == undefined) {\n      return rootElement(selector).toArray().map(function (tag, i) {\n        return getNodeValue(tag);\n      });\n    } else {\n      return rootElement(selector).toArray().map(function (tag, i) {\n        return tag.attribs[attr];\n      });\n    }\n  };\n\n  return {\n    scrap: scrap,\n    scrapElements: scrapElements\n  };\n}\n\nvar context = {\n  createDom: createDom,\n  getScrapper: getScrapper\n};\nexports.context = context;\n\nfunction getNodeValue(node) {\n  var type = node.name;\n\n  if (type === \"img\") {\n    return node.attribs.src;\n  } else if (type === \"a\" || type === \"link\") {\n    return node.attribs.href;\n  }\n\n  return (0, _cheerio.default)(node).text().trim();\n}","import React from \"react\";\nimport { Controlled as CodeMirror } from \"react-codemirror2\";\nimport { lifecycle } from \"recompose\";\n\nexport function HtmlEditor(props) {\n  const onHtmlChange = (editor, data, value) => {\n    props.dispatch(\"updateHtml\", value);\n  };\n  const option = {\n    lineNumbers: true,\n    lineWrapping: true,\n    mode: \"application/json\"\n  };\n  return (\n    <div className=\"HtmlEditorContainer\">\n      <CodeMirror\n        value={props.html}\n        options={option}\n        height=\"150\"\n        width=\"150\"\n        onBeforeChange={onHtmlChange}\n      />\n    </div>\n  );\n}\n","import React from \"react\";\nimport { Controlled as CodeMirror } from \"react-codemirror2\";\n\nexport function JSONEditor(props) {\n  const onJsonChange = (editor, data, value) => {\n    props.dispatch(\"updateJson\", value);\n  };\n\n  const option = {\n    lineNumbers: true,\n    lineWrapping: true,\n    mode: \"application/json\"\n  };\n\n  return (\n    <div className=\"JsonEditorContainer\">\n      <CodeMirror\n        value={props.json}\n        options={option}\n        height=\"150\"\n        width=\"150\"\n        onBeforeChange={onJsonChange}\n      />\n    </div>\n  );\n}\n","import React from \"react\";\nimport JSONViewer from \"react-json-viewer\";\n\nexport const Previewer = function(props) {\n  const { json } = props;\n  return (\n    <div className=\"PreviewerContainer\">\n      <JSONViewer json={json} />\n    </div>\n  );\n};\n","const heroNews = `\n<html>\n  <head>\n    <title>Hero News!</title>\n  </head>\n  <body>\n    <div class=\"main\">\n        <h3 class=\"topic\">Amalgam</h3>\n        <ul class=\"news-list\">\n            <li> \n              <span class=\"content\" data-hero=\"Batman\"}>Batman come back in Gossam City!</span>\n              <img class=\"thumbnail\" src=\"https://exmaple.com/batman.png\"></img>\n            </li>\n            <li> \n              <span class=\"content\" data-hero=\"Dr. Strange\"}>Dr. Strange got into a traffic accident.</span>\n              <img  class=\"thumbnail\" src=\"https://exmaple.com/strange.png\"></img>\n            </li>\n        </ul>\n    </div>\n    <div class=\"sub\">\n        <ul class=\"sub-news-list\">\n            <li> \n              <span class=\"content\" data-hero=\"IronMan\">close in on the \"truth\" of Stark industries.</span>\n              <img class=\"thumbnail\" src=\"https://exmaple.com/stark.png\"></img>\n            </li>\n            <li> \n              <span class=\"content\">MVP of the month.</span>\n              <img  class=\"thumbnail\" src=\"https://exmaple.com/mvp.png\"></img>\n            </li>\n        </ul>\n    </div>\n  </body>\n</html>\n\n`;\n\nconst table = `\n<table>\n    <tr>\n        <td></td>\n        <td></td>\n        <td></td>\n    </tr>\n</table>\n`;\n\nexport { heroNews, table };\n","const attributeRuleSchema = {\n  hero: [\".content[data-hero]\", \"data-hero\"],\n  heroes: [\".content[data-hero]\", \"data-hero\"]\n};\n\nconst defaultSchema = {\n  topic: {\n    content: \".content\"\n  }\n};\n\nconst nameRuleSchema = {\n  topic: {\n    content: \".content\",\n    contents: \".content\"\n  }\n};\n\nconst unfoldRuleSchema = {\n  unfoldTopics: {\n    _unfold: true,\n    content: \".news-list .content\",\n    image: \".news-list img\"\n  },\n  topics: {\n    contents: \".news-list .content\",\n    images: \".news-list img\"\n  }\n};\n\nconst rootRuleSchema = {\n  topic: {\n    contents: \".content\",\n    images: \"img\"\n  },\n  mainTopic: {\n    _root: \".news-list\",\n    contents: \".content\",\n    images: \"img\"\n  },\n  subTopic: {\n    _root: \".sub-news-list\",\n    contents: \".content\",\n    images: \"img\"\n  }\n};\nexport {\n  attributeRuleSchema,\n  defaultSchema,\n  nameRuleSchema,\n  unfoldRuleSchema,\n  rootRuleSchema\n};\n","import React from \"react\";\nimport { Helmet } from \"react-helmet\";\n\nimport MicroContainer from \"react-micro-container\";\nimport { Button, Container, Grid, Header } from \"semantic-ui-react\";\nimport { HtmlEditor } from \"../components/html-editor\";\nimport { JSONEditor } from \"../components/json-editor\";\nimport { Previewer } from \"../components/previewer\";\nimport { heroNews } from \"../examples/mock-html\";\nimport {\n  attributeRuleSchema,\n  defaultSchema,\n  nameRuleSchema,\n  rootRuleSchema,\n  unfoldRuleSchema\n} from \"../examples/mock-schema\";\nimport \"./main.scss\";\n\nimport { browser as kirinuki } from \"../lib/kirinuki\";\n\nif (typeof navigator !== \"undefined\") {\n  require(\"codemirror/mode/htmlmixed/htmlmixed\");\n  require(\"codemirror/mode/javascript/javascript\");\n}\n\nexport default class Index extends MicroContainer {\n  constructor(props, context) {\n    super(props, context);\n    this.state = {\n      json: JSON.stringify(defaultSchema, null, 4),\n      result: {},\n      html: heroNews,\n      loading: false\n    };\n  }\n\n  componentDidMount() {\n    this.subscribe({\n      updateJson: this.updateJson,\n      updateHtml: this.updateHtml\n    });\n  }\n\n  updateJson(str) {\n    this.setState({ json: str });\n  }\n\n  updateHtml(str) {\n    this.setState({ html: str });\n  }\n\n  querySchema() {\n    try {\n      return JSON.parse(this.state.json);\n    } catch (e) {\n      console.error(e);\n      return {};\n    }\n  }\n\n  updateAttributeRuleSchema() {\n    this.updateSchema(attributeRuleSchema);\n  }\n\n  updateNameRuleSchema() {\n    this.updateSchema(nameRuleSchema);\n  }\n\n  updateUnfoldRuleSchema() {\n    this.updateSchema(unfoldRuleSchema);\n  }\n\n  updateRootRuleSchema() {\n    this.updateSchema(rootRuleSchema);\n  }\n\n  updateSchema(schma) {\n    this.setState({ json: JSON.stringify(schma, null, 4) });\n  }\n\n  parse() {\n    const result = kirinuki(this.querySchema(), this.state.html);\n    console.table(result);\n    this.setState({ result: result });\n  }\n\n  render() {\n    return (\n      <div>\n        <Helmet>\n          <link\n            rel=\"stylesheet\"\n            href=\"//cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css\"\n          />\n          <link\n            rel=\"stylesheet\"\n            href=\"//cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.2/semantic.min.css\"\n          />\n          <link\n            rel=\"stylesheet\"\n            href=\"//esironal.github.io/cmtouch/lib/codemirror.css\"\n          />\n          <link\n            rel=\"stylesheet\"\n            href=\"//esironal.github.io/cmtouch/addon/hint/show-hint.css\"\n          />\n        </Helmet>\n\n        <Container text>\n          <Header as=\"h1\">Kirinuki</Header>\n          <p>\n            Kirinuki is a library that convert any html to JSON using CSS\n            selectors.\n          </p>\n          <p>\n            * Kirinuki is automatically convert data type by query key naming\n            rules.(singular form or a plural form)\n            <br />\n            <a onClick={this.updateNameRuleSchema.bind(this)}>try it!</a>\n          </p>\n          <p>\n            * To get the html attributes, specify with Array. ex: `[\"css\n            selector\", \"attribute name\"]`\n            <br />\n            <a onClick={this.updateAttributeRuleSchema.bind(this)}>try it!</a>\n          </p>\n          <p>\n            * Support nesting schema. if schema has '_unfold' property unfold a\n            plain object with array of value into a array with plain object\n            <br />\n            <a onClick={this.updateUnfoldRuleSchema.bind(this)}>try it!</a>\n          </p>\n          <p>\n            * Root path\n            <br />\n            <a onClick={this.updateRootRuleSchema.bind(this)}>try it!</a>\n          </p>\n        </Container>\n\n        <Container>\n          <Header as=\"h2\">Demo</Header>\n          <Grid celled>\n            <Grid.Row>\n              <Grid.Column width={8}>\n                <Header as=\"h3\"> Query Schema </Header>\n                <JSONEditor dispatch={this.dispatch} json={this.state.json} />\n                <hr />\n                <Header as=\"h3\"> Target HTML </Header>\n                <HtmlEditor dispatch={this.dispatch} html={this.state.html} />\n              </Grid.Column>\n              <Grid.Column width={8}>\n                <Header as=\"h3\">\n                  {\" \"}\n                  Result view (Please open the developer console){\" \"}\n                </Header>\n                <Previewer dispatch={this.dispatch} json={this.state.result} />\n              </Grid.Column>\n            </Grid.Row>\n            <Grid.Row>\n              <Grid.Column width={16} textAlign={\"center\"}>\n                <Button\n                  fluid\n                  primary\n                  loading={this.state.loading}\n                  onClick={this.parse.bind(this)}\n                >\n                  parse\n                </Button>\n              </Grid.Column>\n            </Grid.Row>\n          </Grid>\n        </Container>\n      </div>\n    );\n  }\n}\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getNodeValue = getNodeValue;\nexports.context = void 0;\n\nvar _util = require(\"../util\");\n\nfunction createDom() {\n  var node = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : document;\n  var root = arguments.length > 1 ? arguments[1] : undefined;\n  var target = (0, _util.isString)(node) ? parseDom(node) : node;\n\n  if (root != null) {\n    return target.querySelector(root);\n  }\n\n  return target;\n}\n\nfunction getScrapper(rootNode) {\n  var scrap = function scrap(selector, attr) {\n    var node = rootNode.querySelectorAll(selector)[0];\n\n    if (node == null) {\n      return void 0;\n    }\n\n    if (attr == undefined) {\n      return getNodeValue(node);\n    } else {\n      return node.getAttribute(attr);\n    }\n  };\n\n  var scrapElements = function scrapElements(selector, attr) {\n    var list = Array.from(rootNode.querySelectorAll(selector));\n\n    if (attr == undefined) {\n      return list.map(function (tag, i) {\n        return getNodeValue(tag);\n      });\n    }\n\n    return list.map(function (tag, i) {\n      return tag.getAttribute(attr);\n    });\n  };\n\n  return {\n    scrap: scrap,\n    scrapElements: scrapElements\n  };\n}\n\nvar context = {\n  createDom: createDom,\n  getScrapper: getScrapper\n};\nexports.context = context;\n\nfunction getNodeValue(node) {\n  if (node instanceof HTMLImageElement) {\n    return node.src;\n  } else if (node instanceof HTMLAnchorElement || node instanceof HTMLLinkElement) {\n    return node.href;\n  }\n\n  return node.textContent;\n}\n\nfunction parseDom(html) {\n  var parser = new DOMParser();\n  return parser.parseFromString(html, \"text/html\");\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.traversal = traversal;\n\nvar _unfold = require(\"./unfold\");\n\nvar _util = require(\"./util\");\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction traversal(context) {\n  var bindConvert = convert.bind(context);\n\n  function convert(baseSchema, node) {\n    var schema = Object.assign({}, baseSchema);\n    var root = schema._root;\n    var isUnfoldMode = schema._unfold;\n    delete schema._root;\n    delete schema._unfold;\n    var rootElement = root == null ? this.createDom(node) : this.createDom(node, root);\n    var scrapper = this.getScrapper(rootElement);\n    var convertedObject = Object.keys(schema).reduce(function (converted, key) {\n      var selector = schema[key];\n      var scrap = isUnfoldMode || (0, _util.isPlural)(key) ? scrapper.scrapElements : scrapper.scrap;\n\n      if ((0, _util.isString)(selector)) {\n        converted[key] = scrap(selector);\n      } else if (Array.isArray(selector)) {\n        converted[key] = scrap.apply(null, selector);\n      } else if (selector != null && _typeof(selector) === \"object\") {\n        var data = bindConvert(selector, rootElement);\n        converted[key] = Array.isArray(data) && !(0, _util.isPlural)(key) ? data[0] : data;\n      }\n\n      return converted;\n    }, {});\n    return isUnfoldMode ? (0, _unfold.unfold)(convertedObject) : convertedObject;\n  }\n\n  return function (schema, html) {\n    return bindConvert(schema, html);\n  };\n}"],"sourceRoot":""}