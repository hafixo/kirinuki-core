{"version":3,"sources":["webpack:///../../src/scraper/converter.ts","webpack:///../../src/scraper/util.ts","webpack:///../src/kirinuki.ts","webpack:///../../../src/scraper/browser/browser.ts","webpack:///../src/unfold.ts","webpack:///../../../src/scraper/browser/get-node-value.ts","webpack:///../../../src/scraper/browser/create-dom.ts","webpack:///../../../src/scraper/node/node.ts","webpack:///../../../src/scraper/node/get-node-value.ts","webpack:///./src/components/html-editor.js","webpack:///./src/components/json-editor.js","webpack:///./src/components/previewer.js","webpack:///./src/examples/mock-html.js","webpack:///./src/examples/mock-schema.js","webpack:///./src/pages/index.js","webpack:///../../../src/scraper/node/create-dom.ts","webpack:///../src/traversal.ts","webpack:///../src/util.ts"],"names":["util_1","__webpack_require__","unfold_1","exports","generateConverter","createDom","createScrapper","schema","node","context","process","root","_root","isUnfoldMode","_unfold","rootElement","scrapper","convertedObject","Object","keys","reduce","converted","key","selector","scrap","isPlural","scrapElements","unfold","url_1","resolveURL","path","isString","origin","isAbsoluteUrl","resolve","browser_1","node_1","traversal_1","html","traversal","env","nodeParser","browser","target","applyContext","undefined","hasOwnProperty","window","document","defaultContext","location","assign","browserParser","converter_1","get_node_value_1","create_dom_1","convert","rootNode","attr","querySelectorAll","getNodeValue","getAttribute","list","Array","from","map","tag","obj","len","Math","max","apply","val","isArray","length","i","memo","value","HTMLImageElement","src","HTMLAnchorElement","HTMLLinkElement","href","textContent","DOMParser","parseFromString","selectRoot","querySelector","get","attribs","toArray","cheerio_1","__importDefault","util_2","default","text","trim","type","name","HtmlEditor","props","react_default","a","createElement","className","react_codemirror2","options","lineNumbers","lineWrapping","mode","height","width","onBeforeChange","editor","data","dispatch","JSONEditor","json","Previewer","ReactJSONViewer_default","heroNews","attributeRuleSchema","hero","heroes","defaultSchema","topic","content","nameRuleSchema","contents","unfoldRuleSchema","unfoldTopics","image","topics","images","rootRuleSchema","mainTopic","subTopic","navigator","require","Index","_this","_classCallCheck","this","_possibleConstructorReturn","_getPrototypeOf","call","state","JSON","stringify","result","loading","MicroContainer","subscribe","updateJson","updateHtml","str","setState","parse","e","console","error","updateSchema","schma","kirinuki","querySchema","table","Helmet","rel","Container","Header","as","onClick","updateNameRuleSchema","bind","updateAttributeRuleSchema","updateUnfoldRuleSchema","updateRootRuleSchema","Grid","celled","Row","Column","previewer_Previewer","textAlign","Button","fluid","primary","cheerioNode","load","baseSchema","__assign","_typeof","pluralize_1","String","url","test"],"mappings":"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","file":"component---src-pages-index-js-64ddb8c0d78012e08a1b.js","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_1 = require(\"../util\");\nvar unfold_1 = require(\"../unfold\");\nfunction generateConverter(createDom, createScrapper) {\n    return function convert(schema, node, context, process) {\n        var root = schema._root;\n        var isUnfoldMode = schema._unfold;\n        delete schema._root;\n        delete schema._unfold;\n        var rootElement = root === null ? createDom(node) : createDom(node, root);\n        var scrapper = createScrapper(rootElement, context);\n        var convertedObject = Object.keys(schema).reduce(function (converted, key) {\n            var selector = schema[key];\n            var scrap = isUnfoldMode || util_1.isPlural(key)\n                ? scrapper.scrapElements\n                : scrapper.scrap;\n            return process(converted, key, selector, scrap, rootElement);\n        }, {});\n        return isUnfoldMode ? unfold_1.unfold(convertedObject) : convertedObject;\n    };\n}\nexports.generateConverter = generateConverter;\n//# sourceMappingURL=converter.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar url_1 = require(\"url\");\nvar util_1 = require(\"../util\");\nfunction resolveURL(path, context) {\n    if (util_1.isString(context.origin) && !util_1.isAbsoluteUrl(path)) {\n        return url_1.resolve(context.origin, path);\n    }\n    else {\n        return path;\n    }\n}\nexports.resolveURL = resolveURL;\n//# sourceMappingURL=util.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar browser_1 = require(\"./scraper/browser/browser\");\nvar node_1 = require(\"./scraper/node/node\");\nvar traversal_1 = require(\"./traversal\");\nfunction node(schema, html, context) {\n    var nodeParser = traversal_1.traversal(node_1.env, context);\n    return nodeParser(schema, html);\n}\nexports.node = node;\nfunction browser(schema, node, context) {\n    var target, applyContext;\n    if (node == undefined || isTransformContext(node)) {\n        target = window.document;\n    }\n    else {\n        target = node;\n    }\n    var defaultContext = {\n        origin: document.location.origin\n    };\n    applyContext = Object.assign({}, defaultContext, context || {});\n    var browserParser = traversal_1.traversal(browser_1.env, applyContext);\n    return browserParser(schema, target);\n}\nexports.browser = browser;\nfunction isTransformContext(v) {\n    return v.hasOwnProperty('origin');\n}\n//# sourceMappingURL=kirinuki.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar converter_1 = require(\"../converter\");\nvar get_node_value_1 = require(\"./get-node-value\");\nvar create_dom_1 = require(\"./create-dom\");\nexports.env = {\n    convert: converter_1.generateConverter(create_dom_1.createDom, createScrapper)\n};\nfunction createScrapper(rootNode, context) {\n    var scrap = function (selector, attr) {\n        var node = rootNode.querySelectorAll(selector)[0];\n        if (attr === undefined) {\n            return get_node_value_1.getNodeValue(node, context);\n        }\n        else {\n            return node.getAttribute(attr) || undefined;\n        }\n    };\n    var scrapElements = function (selector, attr) {\n        var list = Array.from(rootNode.querySelectorAll(selector));\n        if (attr == undefined) {\n            return list.map(function (tag) {\n                return get_node_value_1.getNodeValue(tag, context);\n            });\n        }\n        return list.map(function (tag) {\n            return tag.getAttribute(attr) || undefined;\n        });\n    };\n    return { scrap: scrap, scrapElements: scrapElements };\n}\n//# sourceMappingURL=browser.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction unfold(obj) {\n    var keys = Object.keys(obj);\n    var len = Math.max.apply(null, keys.map(function (key) {\n        var val = obj[key];\n        if (Array.isArray(val)) {\n            return val.length;\n        }\n        return 1;\n    }));\n    return Array.from(Array(len).keys()).map(function (i) {\n        return keys.reduce(function (memo, key) {\n            var value = obj[key];\n            memo[key] = Array.isArray(value) ? value[i] : value;\n            return memo;\n        }, {});\n    });\n}\nexports.unfold = unfold;\n//# sourceMappingURL=unfold.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_1 = require(\"../util\");\nfunction getNodeValue(node, context) {\n    if (node instanceof HTMLImageElement) {\n        return util_1.resolveURL(node.src, context);\n    }\n    else if (node instanceof HTMLAnchorElement ||\n        node instanceof HTMLLinkElement) {\n        return util_1.resolveURL(node.href, context);\n    }\n    return node.textContent || undefined;\n}\nexports.getNodeValue = getNodeValue;\n//# sourceMappingURL=get-node-value.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_1 = require(\"../../util\");\nfunction createDom(node, root) {\n    var target = util_1.isString(node) ? parseDom(node) : node;\n    if (root == undefined) {\n        return target;\n    }\n    var selectRoot = target.querySelector(root);\n    if (selectRoot === null) {\n        throw \"Can't match root selector \" + root;\n    }\n    return selectRoot;\n}\nexports.createDom = createDom;\nfunction parseDom(html) {\n    var parser = new DOMParser();\n    return parser.parseFromString(html, 'text/html');\n}\n//# sourceMappingURL=create-dom.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar converter_1 = require(\"../converter\");\nvar get_node_value_1 = require(\"./get-node-value\");\nvar create_dom_1 = require(\"./create-dom\");\nexports.env = {\n    convert: converter_1.generateConverter(create_dom_1.createDom, createScrapper)\n};\nfunction createScrapper(rootElement, context) {\n    var scrap = function (selector, attr) {\n        var node = rootElement(selector).get(0);\n        if (attr == undefined) {\n            return get_node_value_1.getNodeValue(node, context);\n        }\n        else {\n            return node.attribs[attr];\n        }\n    };\n    var scrapElements = function (selector, attr) {\n        if (attr == undefined) {\n            return rootElement(selector)\n                .toArray()\n                .map(function (tag) {\n                return get_node_value_1.getNodeValue(tag, context);\n            });\n        }\n        else {\n            return rootElement(selector)\n                .toArray()\n                .map(function (tag) {\n                return tag.attribs[attr];\n            });\n        }\n    };\n    return { scrap: scrap, scrapElements: scrapElements };\n}\n//# sourceMappingURL=node.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_1 = require(\"../../util\");\nvar cheerio_1 = __importDefault(require(\"cheerio\"));\nvar util_2 = require(\"../util\");\nfunction getNodeValue(node, context) {\n    if (node === undefined) {\n        return void 0;\n    }\n    if (util_1.isString(node) || !('attribs' in node)) {\n        return cheerio_1.default(node)\n            .text()\n            .trim();\n    }\n    var type = node.name;\n    if (type === 'img') {\n        return util_2.resolveURL(node.attribs.src, context);\n    }\n    else if (type === 'a' || type === 'link') {\n        return util_2.resolveURL(node.attribs.href, context);\n    }\n    else {\n        return cheerio_1.default(node)\n            .text()\n            .trim();\n    }\n}\nexports.getNodeValue = getNodeValue;\n//# sourceMappingURL=get-node-value.js.map","import React from \"react\";\nimport { Controlled as CodeMirror } from \"react-codemirror2\";\nimport { lifecycle } from \"recompose\";\n\nexport function HtmlEditor(props) {\n  const onHtmlChange = (editor, data, value) => {\n    props.dispatch(\"updateHtml\", value);\n  };\n  const option = {\n    lineNumbers: true,\n    lineWrapping: true,\n    mode: \"application/json\"\n  };\n  return (\n    <div className=\"HtmlEditorContainer\">\n      <CodeMirror\n        value={props.html}\n        options={option}\n        height=\"150\"\n        width=\"150\"\n        onBeforeChange={onHtmlChange}\n      />\n    </div>\n  );\n}\n","import React from \"react\";\nimport { Controlled as CodeMirror } from \"react-codemirror2\";\n\nexport function JSONEditor(props) {\n  const onJsonChange = (editor, data, value) => {\n    props.dispatch(\"updateJson\", value);\n  };\n\n  const option = {\n    lineNumbers: true,\n    lineWrapping: true,\n    mode: \"application/json\"\n  };\n\n  return (\n    <div className=\"JsonEditorContainer\">\n      <CodeMirror\n        value={props.json}\n        options={option}\n        height=\"150\"\n        width=\"150\"\n        onBeforeChange={onJsonChange}\n      />\n    </div>\n  );\n}\n","import React from \"react\";\nimport JSONViewer from \"react-json-viewer\";\n\nexport const Previewer = function(props) {\n  const { json } = props;\n  return (\n    <div className=\"PreviewerContainer\">\n      <JSONViewer json={json} />\n    </div>\n  );\n};\n","const heroNews = `\n<html>\n  <head>\n    <title>Hero News!</title>\n  </head>\n  <body>\n    <div class=\"main\">\n        <h3 class=\"topic\">Amalgam</h3>\n        <ul class=\"news-list\">\n            <li> \n              <span class=\"content\" data-hero=\"Batman\"}>Batman come back in Gossam City!</span>\n              <img class=\"thumbnail\" src=\"https://exmaple.com/batman.png\"></img>\n            </li>\n            <li> \n              <span class=\"content\" data-hero=\"Dr. Strange\"}>Dr. Strange got into a traffic accident.</span>\n              <img  class=\"thumbnail\" src=\"https://exmaple.com/strange.png\"></img>\n            </li>\n        </ul>\n    </div>\n    <div class=\"sub\">\n        <ul class=\"sub-news-list\">\n            <li> \n              <span class=\"content\" data-hero=\"IronMan\">close in on the \"truth\" of Stark industries.</span>\n              <img class=\"thumbnail\" src=\"https://exmaple.com/stark.png\"></img>\n            </li>\n            <li> \n              <span class=\"content\">MVP of the month.</span>\n              <img  class=\"thumbnail\" src=\"https://exmaple.com/mvp.png\"></img>\n            </li>\n        </ul>\n    </div>\n  </body>\n</html>\n\n`;\n\nconst table = `\n<table>\n    <tr>\n        <td></td>\n        <td></td>\n        <td></td>\n    </tr>\n</table>\n`;\n\nexport { heroNews, table };\n","const attributeRuleSchema = {\n  hero: [\".content[data-hero]\", \"data-hero\"],\n  heroes: [\".content[data-hero]\", \"data-hero\"]\n};\n\nconst defaultSchema = {\n  topic: {\n    content: \".content\"\n  }\n};\n\nconst nameRuleSchema = {\n  topic: {\n    content: \".content\",\n    contents: \".content\"\n  }\n};\n\nconst unfoldRuleSchema = {\n  unfoldTopics: {\n    _unfold: true,\n    content: \".news-list .content\",\n    image: \".news-list img\"\n  },\n  topics: {\n    contents: \".news-list .content\",\n    images: \".news-list img\"\n  }\n};\n\nconst rootRuleSchema = {\n  topic: {\n    contents: \".content\",\n    images: \"img\"\n  },\n  mainTopic: {\n    _root: \".news-list\",\n    contents: \".content\",\n    images: \"img\"\n  },\n  subTopic: {\n    _root: \".sub-news-list\",\n    contents: \".content\",\n    images: \"img\"\n  }\n};\nexport {\n  attributeRuleSchema,\n  defaultSchema,\n  nameRuleSchema,\n  unfoldRuleSchema,\n  rootRuleSchema\n};\n","import React from \"react\";\nimport { Helmet } from \"react-helmet\";\n\nimport MicroContainer from \"react-micro-container\";\nimport { Button, Container, Grid, Header } from \"semantic-ui-react\";\nimport { HtmlEditor } from \"../components/html-editor\";\nimport { JSONEditor } from \"../components/json-editor\";\nimport { Previewer } from \"../components/previewer\";\nimport { heroNews } from \"../examples/mock-html\";\nimport {\n  attributeRuleSchema,\n  defaultSchema,\n  nameRuleSchema,\n  rootRuleSchema,\n  unfoldRuleSchema\n} from \"../examples/mock-schema\";\nimport \"./main.scss\";\n\nimport { browser as kirinuki } from \"../lib/kirinuki\";\n\nif (typeof navigator !== \"undefined\") {\n  require(\"codemirror/mode/htmlmixed/htmlmixed\");\n  require(\"codemirror/mode/javascript/javascript\");\n}\n\nexport default class Index extends MicroContainer {\n  constructor(props, context) {\n    super(props, context);\n    this.state = {\n      json: JSON.stringify(defaultSchema, null, 4),\n      result: {},\n      html: heroNews,\n      loading: false\n    };\n  }\n\n  componentDidMount() {\n    this.subscribe({\n      updateJson: this.updateJson,\n      updateHtml: this.updateHtml\n    });\n  }\n\n  updateJson(str) {\n    this.setState({ json: str });\n  }\n\n  updateHtml(str) {\n    this.setState({ html: str });\n  }\n\n  querySchema() {\n    try {\n      return JSON.parse(this.state.json);\n    } catch (e) {\n      console.error(e);\n      return {};\n    }\n  }\n\n  updateAttributeRuleSchema() {\n    this.updateSchema(attributeRuleSchema);\n  }\n\n  updateNameRuleSchema() {\n    this.updateSchema(nameRuleSchema);\n  }\n\n  updateUnfoldRuleSchema() {\n    this.updateSchema(unfoldRuleSchema);\n  }\n\n  updateRootRuleSchema() {\n    this.updateSchema(rootRuleSchema);\n  }\n\n  updateSchema(schma) {\n    this.setState({ json: JSON.stringify(schma, null, 4) });\n  }\n\n  parse() {\n    const result = kirinuki(this.querySchema(), this.state.html);\n    console.table(result);\n    this.setState({ result: result });\n  }\n\n  render() {\n    return (\n      <div>\n        <Helmet>\n          <link\n            rel=\"stylesheet\"\n            href=\"//cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css\"\n          />\n          <link\n            rel=\"stylesheet\"\n            href=\"//cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.2/semantic.min.css\"\n          />\n          <link\n            rel=\"stylesheet\"\n            href=\"//esironal.github.io/cmtouch/lib/codemirror.css\"\n          />\n          <link\n            rel=\"stylesheet\"\n            href=\"//esironal.github.io/cmtouch/addon/hint/show-hint.css\"\n          />\n        </Helmet>\n\n        <Container text>\n          <Header as=\"h1\">Kirinuki</Header>\n          <p>\n            Kirinuki is a library that convert any html to JSON using CSS\n            selectors.\n          </p>\n          <p>\n            * Kirinuki is automatically convert data type by query key naming\n            rules.(singular form or a plural form)\n            <br />\n            <a onClick={this.updateNameRuleSchema.bind(this)}>try it!</a>\n          </p>\n          <p>\n            * To get the html attributes, specify with Array. ex: `[\"css\n            selector\", \"attribute name\"]`\n            <br />\n            <a onClick={this.updateAttributeRuleSchema.bind(this)}>try it!</a>\n          </p>\n          <p>\n            * Support nesting schema. if schema has '_unfold' property unfold a\n            plain object with array of value into a array with plain object\n            <br />\n            <a onClick={this.updateUnfoldRuleSchema.bind(this)}>try it!</a>\n          </p>\n          <p>\n            * Root path\n            <br />\n            <a onClick={this.updateRootRuleSchema.bind(this)}>try it!</a>\n          </p>\n        </Container>\n\n        <Container>\n          <Header as=\"h2\">Demo</Header>\n          <Grid celled>\n            <Grid.Row>\n              <Grid.Column width={8}>\n                <Header as=\"h3\"> Query Schema </Header>\n                <JSONEditor dispatch={this.dispatch} json={this.state.json} />\n                <hr />\n                <Header as=\"h3\"> Target HTML </Header>\n                <HtmlEditor dispatch={this.dispatch} html={this.state.html} />\n              </Grid.Column>\n              <Grid.Column width={8}>\n                <Header as=\"h3\">\n                  {\" \"}\n                  Result view (Please open the developer console){\" \"}\n                </Header>\n                <Previewer dispatch={this.dispatch} json={this.state.result} />\n              </Grid.Column>\n            </Grid.Row>\n            <Grid.Row>\n              <Grid.Column width={16} textAlign={\"center\"}>\n                <Button\n                  fluid\n                  primary\n                  loading={this.state.loading}\n                  onClick={this.parse.bind(this)}\n                >\n                  parse\n                </Button>\n              </Grid.Column>\n            </Grid.Row>\n          </Grid>\n        </Container>\n      </div>\n    );\n  }\n}\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_1 = require(\"../../util\");\nvar cheerio_1 = __importDefault(require(\"cheerio\"));\nfunction createDom(node, root) {\n    var cheerioNode = util_1.isString(node) ? cheerio_1.default.load(node) : node;\n    if (root !== undefined) {\n        var html = cheerioNode(root).html();\n        if (html === null) {\n            return cheerioNode;\n        }\n        return cheerio_1.default.load(html);\n    }\n    return cheerioNode;\n}\nexports.createDom = createDom;\n//# sourceMappingURL=create-dom.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_1 = require(\"./util\");\nfunction traversal(env, context) {\n    if (context === void 0) { context = {}; }\n    var convert = function (baseSchema, node) {\n        var schema = __assign({}, baseSchema);\n        return env.convert(schema, node, context, function (converted, key, selector, scrap, rootElement) {\n            if (util_1.isString(selector)) {\n                converted[key] = scrap(selector);\n            }\n            else if (Array.isArray(selector)) {\n                converted[key] = scrap.apply(null, selector);\n            }\n            else if (selector !== null && typeof selector === 'object') {\n                var data = convert(selector, rootElement);\n                converted[key] =\n                    Array.isArray(data) && !util_1.isPlural(key) ? data[0] : data;\n            }\n            return converted;\n        });\n    };\n    return function (schema, html) {\n        return convert(schema, html);\n    };\n}\nexports.traversal = traversal;\n//# sourceMappingURL=traversal.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// @flow\nvar pluralize_1 = __importDefault(require(\"pluralize\"));\nfunction isString(str) {\n    return typeof str === 'string' || str instanceof String;\n}\nexports.isString = isString;\nfunction isPlural(str) {\n    return pluralize_1.default(str) === str;\n}\nexports.isPlural = isPlural;\nfunction isAbsoluteUrl(url) {\n    return /^[a-z][a-z0-9+.-]*:/.test(url);\n}\nexports.isAbsoluteUrl = isAbsoluteUrl;\n//# sourceMappingURL=util.js.map"],"sourceRoot":""}